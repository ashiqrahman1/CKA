"use strict";define("Build/Settings",["require","exports","Build/Flux/Sources/Contribution","VSS/Core/Observable","VSS/Platform/Context","Tfs/Platform/Page","VSS/Platform/Telemetry","Build/Flux/Store","react","Build/SettingsToggle/SettingsToggle","VSS/Platform/Layout","VSS/Platform/Components/Format","VSSUI/Observer","VSSUI/Spinner","VSS/Platform/Feature","VSS/Core/Util/String","VSS/Platform/Components/ErrorBoundary","VSSUI/MessageCard","VSSUI/FormItem","VSSUI/Icon","VSSUI/Link","VSSUI/TextField","VSSUI/Card","VSSUI/Header"],(function(e,t,i,s,n,r,a,o,l,c,u,g,d,p,h,R,S,b,P,v,f,_,m,C){var E,A,T,w;E=t.Resources={},t.Resources.BadgesArePrivate="Disable anonymous access to badges",t.Resources.BadgesArePrivateToolTip="Anonymous users can access the status badge API for all pipelines unless this option is enabled.",t.Resources.DaysToKeepArtifacts="Days to keep artifacts, symbols and attachments",t.Resources.DaysToKeepPullRequestRuns="Days to keep pull request runs",t.Resources.DaysToKeepRuns="Days to keep runs",t.Resources.DisableClassicPipelineCreation="Disable creation of classic build and classic release pipelines",t.Resources.DisableClassicPipelineCreationToolTip="When this is enabled, users will not be able to create / import classic pipelines, classic release pipelines, task groups, and deployment groups. Existing classic (release) pipelines, task groups, and deployment groups will continue to work.",t.Resources.DisableClassicBuildPipelineCreation="Disable creation of classic build pipelines",t.Resources.DisableClassicBuildPipelineCreationToolTip="No classic build pipelines can be created / imported. Existing ones will continue to work.",t.Resources.DisableClassicReleasePipelineCreation="Disable creation of classic release pipelines",t.Resources.DisableClassicReleasePipelineCreationToolTip="No classic release pipelines, task groups, and deployment groups can be created / imported. Existing ones will continue to work.",t.Resources.EnforceJobAuthScope="Limit job authorization scope to current project for non-release pipelines",t.Resources.EnforceJobAuthScopeForReleases="Limit job authorization scope to current project for release pipelines",t.Resources.EnforceJobAuthScopeToolTip="Non-Release Pipelines can run with collection scoped access tokens unless this option is enabled. With this option enabled, you can reduce the scope of access for all non-release pipelines to the current project.",t.Resources.EnforceJobAuthScopeForReleasesToolTip="Release pipelines can run with collection scoped access tokens unless this option is enabled. With this option enabled, you can reduce the scope of access for all release pipelines to the current project.",t.Resources.EnforceReferencedRepoScopedToken="Protect access to repositories in YAML pipelines",t.Resources.EnforceReferencedRepoScopedTokenToolTip="Apply checks and approvals when accessing repositories from YAML pipelines. Also, generate a job access token that is scoped to repositories that are explicitly referenced in the YAML pipeline.",t.Resources.EnforceVariable="Limit variables that can be set at queue time",t.Resources.EnforceVariableToolTip='You can set any variables at queue time unless this option is enabled. With this option enabled, only those variables that are explicitly marked as "Settable at queue time" can be set.',t.Resources.EvaluateArtifactTooltip="Evaluate artifact",t.Resources.General="General",t.Resources.LearnMore="Learn more about run retention",t.Resources.LoadingText="Loading...",t.Resources.NumberOfRecentRunsPerPipeline="Number of recent runs to retain per pipeline",t.Resources.PurgeArtifactsSettingIgnored="The artifacts, symbols and attachments retention setting is being ignored because the runs retention setting is evaluated first.",t.Resources.RequiredValueRangeError="Enter a value between {0} and {1}",t.Resources.RetentionPolicy="Retention policy",t.Resources.RunsPerPipelineMoreInfo="This many runs will also be retained per protected branch and default pipeline branch. (Azure Repos only)",t.Resources.Settings="Settings",t.Resources.SettingEnforcedOrgLevel="This setting cannot be changed as it is enforced at the organization level.",t.Resources.PublishPipelineMetadata="Publish metadata from pipelines (preview)",t.Resources.PublishPipelineMetadataTooltip="Allows pipelines to record metadata. {0} check can be configured to define policies using the metadata recorded.",t.Resources.RetentionPolicyNoPermissions="Access to the pipeline retention policy settings is restricted to administrators and those with the view build resources permission.",function(e){t[e]={};class o extends n.VssService{constructor(){super(...arguments),this.updateBadgesArePrivate=async e=>{await this._updateSetting(this.c_badgesPublic,!e)},this.updateEnforceSettableVar=async e=>{await this._updateSetting(this.c_enforceSettableVar,e)},this.updateAuditEnforceSettableVar=async e=>{await this._updateSetting(this.c_auditEnforceSettableVar,e)},this.updateJobAuthScope=async e=>{await this._updateSetting(this.c_enforceJobAuthScope,e)},this.updateJobAuthScopeForReleases=async e=>{await this._updateSetting(this.c_enforceJobAuthScopeForReleases,e)},this.updatePublishPipelineMetadata=async e=>{const t={[this.c_publishPipelineMetadata]:e.toString()},i=(0,r.getTFSProject)(this.pageContext);(0,a.publishEvent)(this.pageContext,"PublishPipelineMetadata","SettingValueSwitch",{value:e,projectId:i&&i.id||""}),await this._update(t)},this.updateEnforceReferencedRepoScopedToken=async e=>{await this._updateSetting(this.c_enforceReferencedRepoScopedToken,e)},this.updateDisableClassicPipelineCreation=async e=>{await this._updateSetting(this.c_disableClassicPipelineCreation,e)},this.updateDisableClassicBuildPipelineCreation=async e=>{await this._updateSetting(this.c_disableClassicBuildPipelineCreation,e)},this.updateDisableClassicReleasePipelineCreation=async e=>{await this._updateSetting(this.c_disableClassicReleasePipelineCreation,e)},this._updateSetting=async(e,t)=>{const i={[e]:t.toString()};await this._update(i)},this.c_contributionId="ms.vss-build-web.pipelines-general-settings-data-provider",this.c_badgesPublic="badgesArePublic",this.c_enforceSettableVar="enforceSettableVar",this.c_auditEnforceSettableVar="auditEnforceSettableVar",this.c_enforceJobAuthScope="enforceJobAuthScope",this.c_enforceJobAuthScopeForReleases="enforceJobAuthScopeForReleases",this.c_publishPipelineMetadata="publishPipelineMetadata",this.c_enforceReferencedRepoScopedToken="enforceReferencedRepoScopedToken",this.c_disableClassicPipelineCreation="disableClassicPipelineCreation",this.c_disableClassicBuildPipelineCreation="disableClassicBuildPipelineCreation",this.c_disableClassicReleasePipelineCreation="disableClassicReleasePipelineCreation"}get data(){return this._settings}_serviceStart(e){super._serviceStart(e),this._initialize()}_serviceRestart(e){super._serviceRestart(e),this._initialize()}_serviceEnd(e){super._serviceEnd(e)}async _update(e){const t=await this._source.getDataAsync(this.c_contributionId,e,!0);t&&(this._settings.value=t)}refreshData(){}async _initialize(){this._source=new i.ContributionSource({pageContext:this.pageContext}),this._settings=new s.ObservableValue({}),await this._update(void 0)}}t[e].GeneralSettingsService=o,n.Services.add("IGeneralSettingsService",{serviceFactory:o})}("generalGeneralSettingsService"),function(e){A=t[e]={};class n extends o.Store{constructor(e){super(),this._onPurgeArtifactsChanged=e=>{this._onValueChanged(e,this._purgeArtifactsSetting)},this._onPurgePullRequestRunsChanged=e=>{this._onValueChanged(e,this._purgePullRequestRunsSetting)},this._onPurgeRunsChanged=e=>{this._onValueChanged(e,this._purgeRunsSetting)},this._onrunsToRetainPerProtectedBranchChanged=e=>{this._onValueChanged(e,this._runsToRetainPerProtectedBranchSetting)},this._onValueChanged=async(e,t)=>{if(!this._pageIsReadOnly){const i=parseInt(e),s=i>=t.serverSetting.min&&i<=t.serverSetting.max;if(t.isValid!=s&&(t.isValid=s,this.emitChanged()),this.isValid&&i!==t.serverSetting.value){const e={[this.c_purgeArtifactsAfter]:this.purgeArtifactsAfter.value,[this.c_purgePullRequestRunsAfter]:this.purgePullRequestRunsAfter.value,[this.c_purgeRunsAfter]:this.purgeRunsAfter.value,[this.c_runsToRetainPerProtectedBranch]:this.runsToRetainPerProtectedBranch.value};await this._update(e)}}},this.c_contributionId="ms.vss-build-web.pipelines-retention-data-provider",this.c_purgeRunsAfter="PurgeRuns",this.c_purgePullRequestRunsAfter="PurgePullRequestRuns",this.c_purgeArtifactsAfter="PurgeArtifacts",this.c_runsToRetainPerProtectedBranch="runsToRetainPerProtectedBranch",this._source=new i.ContributionSource({pageContext:e.pageContext}),this._pageIsReadOnly=!0,this._showSettings=!0,this._purgeArtifactsSetting={value:new s.ObservableValue(""),isValid:!1,serverSetting:{min:0,max:0,value:0}},this._purgeRunsSetting={value:new s.ObservableValue(""),isValid:!1,serverSetting:{min:0,max:0,value:0}},this._purgePullRequestRunsSetting={value:new s.ObservableValue(""),isValid:!1,serverSetting:{min:0,max:0,value:0}},this._runsToRetainPerProtectedBranchSetting={value:new s.ObservableValue(""),isValid:!1,serverSetting:{min:0,max:0,value:0}},this._purgeArtifactsSetting.value.subscribe(this._onPurgeArtifactsChanged),this._purgeRunsSetting.value.subscribe(this._onPurgeRunsChanged),this._purgePullRequestRunsSetting.value.subscribe(this._onPurgePullRequestRunsChanged),this._runsToRetainPerProtectedBranchSetting.value.subscribe(this._onrunsToRetainPerProtectedBranchChanged)}dispose(){this._purgeArtifactsSetting.value.unsubscribe(this._onPurgeArtifactsChanged),this._purgeRunsSetting.value.unsubscribe(this._onPurgeRunsChanged),this._purgePullRequestRunsSetting.value.unsubscribe(this._onPurgePullRequestRunsChanged),this._runsToRetainPerProtectedBranchSetting.value.unsubscribe(this._onrunsToRetainPerProtectedBranchChanged)}get isReadOnly(){return this._pageIsReadOnly}get showSettings(){return this._showSettings}get isValid(){return!(this.purgeArtifactsInvalid||this.purgePullRequestRunsInvalid||this.purgeRunsInvalid||this.runsToRetainPerProtectedBranchInvalid)}get purgeArtifactsAfter(){return this._purgeArtifactsSetting.value}get purgeArtifactsIgnored(){return this._purgeArtifactsIgnored}get purgeArtifactsInvalid(){return!this._purgeArtifactsSetting.isValid}get purgeArtifactsSetting(){return this._purgeArtifactsSetting.serverSetting}get purgeRunsAfter(){return this._purgeRunsSetting.value}get purgeRunsInvalid(){return!this._purgeRunsSetting.isValid}get purgeRunsSetting(){return this._purgeRunsSetting.serverSetting}get purgePullRequestRunsAfter(){return this._purgePullRequestRunsSetting.value}get purgePullRequestRunsInvalid(){return!this._purgePullRequestRunsSetting.isValid}get purgePullRequestRunsSetting(){return this._purgePullRequestRunsSetting.serverSetting}get runsToRetainPerProtectedBranch(){return this._runsToRetainPerProtectedBranchSetting.value}get runsToRetainPerProtectedBranchInvalid(){return!this._runsToRetainPerProtectedBranchSetting.isValid}get runsToRetainPerProtectedBranchSetting(){return this._runsToRetainPerProtectedBranchSetting.serverSetting}async fetch(){await this._update(void 0)}async _update(e){this._pageIsReadOnly=!0,this.emitChanged();const t=await this._source.getDataAsync(this.c_contributionId,e,!0);t?(this._showSettings=!0,this._purgeArtifactsSetting.serverSetting=t.purgeAllArtifacts,this._purgePullRequestRunsSetting.serverSetting=t.purgePullRequestRuns,this._purgeRunsSetting.serverSetting=t.purgeRuns,this._runsToRetainPerProtectedBranchSetting.serverSetting=t.runsToRetainPerProtectedBranch,this._purgeArtifactsSetting.value.value=this._purgeArtifactsSetting.serverSetting.value.toString(),this._purgeRunsSetting.value.value=this._purgeRunsSetting.serverSetting.value.toString(),this._purgePullRequestRunsSetting.value.value=this._purgePullRequestRunsSetting.serverSetting.value.toString(),this._runsToRetainPerProtectedBranchSetting.value.value=this._runsToRetainPerProtectedBranchSetting.serverSetting.value.toString(),this._purgeArtifactsSetting.isValid=!0,this._purgeRunsSetting.isValid=!0,this._purgePullRequestRunsSetting.isValid=!0,this._runsToRetainPerProtectedBranchSetting.isValid=!0,this._pageIsReadOnly=t.viewOnlyPermissions,this._purgeArtifactsIgnored=this._purgeArtifactsSetting.serverSetting.value>=this._purgeRunsSetting.serverSetting.value):(this._showSettings=!1,this._pageIsReadOnly=!0),this.emitChanged()}}t[e].RetentionSettingsStore=n}("retentionRetentionSettingsStore"),function(e){T=t[e]={};class i extends u.VssComponent{constructor(e,t){super(e,t),this._renderPublishPipelineMetadataTooltip=()=>l.createElement("div",{className:"pipelines-settings-metadata-tooltip"},l.createElement(g.FormatComponent,{format:E.PublishPipelineMetadataTooltip},l.createElement("i",null,E.EvaluateArtifactTooltip))),this._service=this.context.pageContext.getService("IGeneralSettingsService"),this._settings=this._service.data,this._checkAudit=(0,h.isFeatureFlagEnabled)(this.context.pageContext,"AzureDevOps.BuildAndRelease.ShowAuditLogForHighRiskSettings",!1)}render(){return l.createElement(d.Observer,{settings:this._settings},(e=>{const t=Object.keys(e.settings).length;return l.createElement("div",{className:"settings-view"},t>0&&l.createElement("div",null,!e.settings.publicProject&&l.createElement("div",null,l.createElement(c.SettingsToggle,{checked:e.settings.statusBadgesArePrivate.enabled||e.settings.statusBadgesArePrivate.orgEnabled,disabled:e.settings.viewOnlyPermissions||e.settings.statusBadgesArePrivate.orgEnabled,title:E.BadgesArePrivate,description:E.BadgesArePrivateToolTip,onChange:(e,t)=>this._service.updateBadgesArePrivate(t),toggleTooltipProps:e.settings.statusBadgesArePrivate.orgEnabled?{text:E.SettingEnforcedOrgLevel}:void 0})),l.createElement("div",null,l.createElement(c.SettingsToggle,{checked:e.settings.enforceSettableVar.enabled||e.settings.enforceSettableVar.orgEnabled,auditChecked:this._checkAudit&&(e.settings.auditEnforceSettableVar.enabled||e.settings.auditEnforceSettableVar.orgEnabled),disabled:e.settings.viewOnlyPermissions||e.settings.enforceSettableVar.orgEnabled,auditDisabled:e.settings.viewOnlyPermissions||e.settings.auditEnforceSettableVar.orgEnabled,title:E.EnforceVariable,description:E.EnforceVariableToolTip,onChange:(e,t)=>this._service.updateEnforceSettableVar(t),onAuditChange:(e,t)=>this._service.updateAuditEnforceSettableVar(t),toggleTooltipProps:e.settings.enforceSettableVar.orgEnabled?{text:E.SettingEnforcedOrgLevel}:void 0,toggleAuditTooltipProps:this._checkAudit&&e.settings.auditEnforceSettableVar.orgEnabled?{text:E.SettingEnforcedOrgLevel}:void 0,isHighRisk:!0,isHighRiskAudit:this._checkAudit,learnMoreLink:"https://go.microsoft.com/fwlink/?linkid=2214054"})),l.createElement("div",null,l.createElement(c.SettingsToggle,{checked:e.settings.enforceJobAuthScope.enabled||e.settings.enforceJobAuthScope.orgEnabled,disabled:e.settings.viewOnlyPermissions||e.settings.enforceJobAuthScope.orgEnabled,title:E.EnforceJobAuthScope,description:E.EnforceJobAuthScopeToolTip,onChange:(e,t)=>this._service.updateJobAuthScope(t),toggleTooltipProps:e.settings.enforceJobAuthScope.orgEnabled?{text:E.SettingEnforcedOrgLevel}:void 0})),(0,h.isFeatureFlagEnabled)(this.context.pageContext,"AzureDevOps.ReleaseManagement.EnforceJobAuthScopeForReleases",!1)&&l.createElement("div",null,l.createElement(c.SettingsToggle,{checked:e.settings.enforceJobAuthScopeForReleases.enabled||e.settings.enforceJobAuthScopeForReleases.orgEnabled,disabled:e.settings.viewOnlyPermissions||e.settings.enforceJobAuthScopeForReleases.orgEnabled,title:E.EnforceJobAuthScopeForReleases,description:E.EnforceJobAuthScopeForReleasesToolTip,onChange:(e,t)=>this._service.updateJobAuthScopeForReleases(t),toggleTooltipProps:e.settings.enforceJobAuthScopeForReleases.orgEnabled?{text:E.SettingEnforcedOrgLevel}:void 0})),l.createElement("div",null,l.createElement(c.SettingsToggle,{checked:e.settings.publishPipelineMetadata.enabled||e.settings.publishPipelineMetadata.orgEnabled,disabled:e.settings.viewOnlyPermissions||e.settings.publishPipelineMetadata.orgEnabled,title:E.PublishPipelineMetadata,description:this._renderPublishPipelineMetadataTooltip(),onChange:(e,t)=>this._service.updatePublishPipelineMetadata(t)})),l.createElement("div",null,l.createElement(c.SettingsToggle,{checked:e.settings.enforceReferencedRepoScopedToken.enabled||e.settings.enforceReferencedRepoScopedToken.orgEnabled,disabled:e.settings.viewOnlyPermissions||e.settings.enforceReferencedRepoScopedToken.orgEnabled,title:E.EnforceReferencedRepoScopedToken,description:E.EnforceReferencedRepoScopedTokenToolTip,onChange:(e,t)=>this._service.updateEnforceReferencedRepoScopedToken(t)})),(0,h.isFeatureFlagEnabled)(this.context.pageContext,"Build2.NewTogglesToDisableClassicPipelineCreation",!1)&&l.createElement("div",null,l.createElement("div",null,l.createElement(c.SettingsToggle,{checked:e.settings.disableClassicBuildPipelineCreation.enabled||e.settings.disableClassicBuildPipelineCreation.orgEnabled,disabled:e.settings.viewOnlyPermissions||e.settings.disableClassicBuildPipelineCreation.orgEnabled,title:E.DisableClassicBuildPipelineCreation,description:E.DisableClassicBuildPipelineCreationToolTip,onChange:(e,t)=>this._service.updateDisableClassicBuildPipelineCreation(t),toggleTooltipProps:e.settings.disableClassicBuildPipelineCreation.orgEnabled?{text:E.SettingEnforcedOrgLevel}:void 0})),l.createElement("div",null,l.createElement(c.SettingsToggle,{checked:e.settings.disableClassicReleasePipelineCreation.enabled||e.settings.disableClassicReleasePipelineCreation.orgEnabled,disabled:e.settings.viewOnlyPermissions||e.settings.disableClassicReleasePipelineCreation.orgEnabled,title:E.DisableClassicReleasePipelineCreation,description:E.DisableClassicReleasePipelineCreationToolTip,onChange:(e,t)=>this._service.updateDisableClassicReleasePipelineCreation(t),toggleTooltipProps:e.settings.disableClassicReleasePipelineCreation.orgEnabled?{text:E.SettingEnforcedOrgLevel}:void 0}))),!(0,h.isFeatureFlagEnabled)(this.context.pageContext,"Build2.NewTogglesToDisableClassicPipelineCreation",!1)&&l.createElement("div",null,l.createElement(c.SettingsToggle,{checked:e.settings.disableClassicPipelineCreation.enabled||e.settings.disableClassicPipelineCreation.orgEnabled,disabled:e.settings.viewOnlyPermissions||e.settings.disableClassicPipelineCreation.orgEnabled,title:E.DisableClassicPipelineCreation,description:E.DisableClassicPipelineCreationToolTip,onChange:(e,t)=>this._service.updateDisableClassicPipelineCreation(t),toggleTooltipProps:e.settings.disableClassicPipelineCreation.orgEnabled?{text:E.SettingEnforcedOrgLevel}:void 0}))),0===t&&l.createElement(p.Spinner,{className:"loading-spinner",label:E.LoadingText}))}))}}t[e].GeneralSettingsView=i}("generalGeneralSettingsView"),function(e){w=t[e]={};class i extends u.VssComponent{constructor(e,t){super(e,t),this._noContent=()=>l.createElement(S.ErrorBoundary,{handlerComponentType:"tfs.page-error-handler"},l.createElement(u.RegionComponent,{componentRegion:"retention-policy-tab-content-region",fallbackComponent:()=>l.createElement("div",null,E.RetentionPolicyNoPermissions)})),this._onStoreChanged=()=>{this.setState({isReadOnly:this._store.isReadOnly,purgeArtifactsIgnored:this._store.purgeArtifactsIgnored,purgeArtifactsInvalid:this._store.purgeArtifactsInvalid,purgeArtifactsMessage:this._store.purgeArtifactsInvalid?this.getRequiredRangeMessage(this._store.purgeArtifactsSetting):"",purgePullRequestRunsInvalid:this._store.purgePullRequestRunsInvalid,purgePullRequestRunsMessage:this._store.purgePullRequestRunsInvalid?this.getRequiredRangeMessage(this._store.purgePullRequestRunsSetting):"",purgeRunsInvalid:this._store.purgeRunsInvalid,purgeRunsMessage:this._store.purgeRunsInvalid?this.getRequiredRangeMessage(this._store.purgeRunsSetting):"",ready:!0,runsToRetainPerProtectedBranchMessage:this._store.runsToRetainPerProtectedBranchInvalid?this.getRequiredRangeMessage(this._store.runsToRetainPerProtectedBranchSetting):"",settingsValid:this._store.isValid,showSettings:this._store.showSettings})},this.state={isReadOnly:!0,purgeArtifactsIgnored:!1,purgeArtifactsInvalid:!1,purgeArtifactsMessage:"",purgePullRequestRunsInvalid:!1,purgePullRequestRunsMessage:"",purgeRunsInvalid:!1,purgeRunsMessage:"",ready:!1,runsToRetainPerProtectedBranchMessage:"",settingsValid:!1,showSettings:!0},this._store=new A.RetentionSettingsStore({pageContext:t.pageContext}),this._store.fetch()}componentDidMount(){this._store.addListener(this._onStoreChanged);this.context.pageContext.getService("IVssPerformanceService").markTimeToInteractive("Admin","RetentionSettings")}componentWillUnmount(){this._store.removeListener(this._onStoreChanged)}render(){return this.state.ready?this.state.showSettings?l.createElement("div",{className:"settings-view flex-column rhythm-vertical-8"},this.getPurgeArtifactsIgnoredMessageRow(this.state.purgeArtifactsIgnored),this.getRetentionRow(E.DaysToKeepArtifacts,this._store.purgeArtifactsInvalid,this._store.purgeArtifactsAfter,this.state.purgeArtifactsMessage),this.getRetentionRow(E.DaysToKeepRuns,this._store.purgeRunsInvalid,this._store.purgeRunsAfter,this.state.purgeRunsMessage),this.getRetentionRow(E.DaysToKeepPullRequestRuns,this._store.purgePullRequestRunsInvalid,this._store.purgePullRequestRunsAfter,this.state.purgePullRequestRunsMessage),this.getRetentionRow(E.NumberOfRecentRunsPerPipeline,this._store.runsToRetainPerProtectedBranchInvalid,this._store.runsToRetainPerProtectedBranch,this.state.runsToRetainPerProtectedBranchMessage,E.RunsPerPipelineMoreInfo),l.createElement(f.Link,{className:"is-link margin-top-16",href:"https://go.microsoft.com/fwlink/?linkid=2114007",target:"_blank"},E.LearnMore),l.createElement("div",{className:"clear",key:"clear"})):this._noContent():l.createElement(p.Spinner,{className:"loading-spinner",label:E.LoadingText,key:"spinner"})}getPurgeArtifactsIgnoredMessageRow(e){return e?l.createElement("div",{key:"ignored"},l.createElement("div",{className:"retention-settings-row"},l.createElement(b.MessageCard,{className:"retention-settings-message",severity:"Warning"},E.PurgeArtifactsSettingIgnored))):l.createElement("span",{key:"ignored"})}getRetentionRow(e,t,i,s,n){return l.createElement("div",{key:e},l.createElement("div",{className:"retention-settings-row flex-row flex-start"},l.createElement("div",{className:"retention-settings-label flex-center flex-row margin-vertical-8"},e,n&&l.createElement(v.Icon,{className:"more-info-icon",iconName:"Info",tooltipProps:{text:n},tabIndex:0})),l.createElement(P.FormItem,{className:"retention-settings-value",error:t,message:s},l.createElement(_.TextField,{readOnly:this.state.isReadOnly,value:i,onChange:(e,t)=>i.value=t}))))}getRequiredRangeMessage(e){return(0,R.format)(E.RequiredValueRangeError,e.min,e.max)}}t[e].RetentionSettingsView=i}("retentionRetentionSettingsView"),function(e){t.SettingsView={};class i extends u.VssComponent{render(){return l.createElement("div",{className:"bolt-page-grey pipeline-settings flex flex-column flex-grow"},l.createElement(C.Header,{title:E.Settings,titleSize:1}),this._showProjectRetentionSettings()&&l.createElement(m.Card,{className:"bolt-card-white pipelines-settings-card",titleProps:{text:E.RetentionPolicy,size:2}},l.createElement("div",null,l.createElement(w.RetentionSettingsView,null))),l.createElement(m.Card,{className:"bolt-card-white pipelines-settings-card",titleProps:{text:E.General,size:2},contentProps:{contentPadding:!1}},l.createElement("div",null,l.createElement(T.GeneralSettingsView,null))))}_showProjectRetentionSettings(){return(0,h.isFeatureFlagEnabled)(this.context.pageContext,"Pipelines.SimplifiedRetention",!1)&&(0,h.isFeatureFlagEnabled)(this.context.pageContext,"DistributedTask.PipelineBillingModel2",!1)}}u.Components.add("pipelines-settings-view",i)}()}),["Resources","general/GeneralSettingsService","retention/RetentionSettingsStore","general/GeneralSettingsView","retention/RetentionSettingsView","SettingsView"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-build-web.settings"}}));